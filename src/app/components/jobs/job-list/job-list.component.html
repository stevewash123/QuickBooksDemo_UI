<div class="job-list-container">
  <!-- Header -->
  <div class="header">
    <h2 id="jobs-title">Jobs Dashboard</h2>
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="reseedDatabase()" [disabled]="reseedingInProgress">
        {{ reseedingInProgress ? 'Reseeding...' : 'üîÑ Reseed Demo Data' }}
      </button>
      <button class="btn btn-primary" (click)="createNewJob()">+ New Job</button>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters">
    <div class="filter-section">
      <label>Filters:</label>
      <select [(ngModel)]="selectedStatus" (change)="onFilterChange()" class="filter-select">
        <option value="all">All Status</option>
        <option value="Quote">Quote</option>
        <option value="InProgress">In Progress</option>
        <option value="Completed">Completed</option>
      </select>

      <select [(ngModel)]="selectedType" (change)="onFilterChange()" class="filter-select">
        <option value="all">All Types</option>
        <option value="Installation">Installation</option>
        <option value="ServiceCall">Service Call</option>
        <option value="Repair">Repair</option>
      </select>

      <select [(ngModel)]="selectedTechnician" (change)="onFilterChange()" class="filter-select">
        <option value="all">All Techs</option>
        <option *ngFor="let tech of technicians" [value]="tech.id">{{ tech.name }}</option>
      </select>
    </div>

    <div class="search-section">
      <label>Search:</label>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onFilterChange()"
        placeholder="Search jobs..."
        class="search-input">
      <span class="search-icon">üîç</span>
    </div>
  </div>

  <!-- Job Table -->
  <div class="job-table jobs-grid" id="jobs-grid">
    <div class="table-header">
      <div class="col-status">Status</div>
      <div class="col-customer">Customer</div>
      <div class="col-description">Description</div>
      <div class="col-tech">Tech</div>
      <div class="col-amount">Amount</div>
      <div class="col-actions">Actions</div>
    </div>

    <div class="table-body">
      <div *ngFor="let job of filteredJobs; let i = index"
           class="job-row"
           [class.completed-job-row]="job.status === 2 || job.status === 'Completed'"
           [attr.data-job-id]="job.id"
           [id]="i === 0 ? 'job-row-1' : null"
           (click)="viewJob(job.id)">
        <div class="col-status">
          <span
            [class]="getStatusClass(job.status)"
            [title]="getStatusText(job.status)"
            class="status-indicator">
            {{ getStatusIcon(job.status) }}
          </span>
        </div>

        <div class="col-customer">
          <div class="customer-name">{{ job.customerName }}</div>
        </div>

        <div class="col-description">
          <div class="job-description">{{ job.description }}</div>
          <div class="job-type">{{ job.jobType | jobType }}</div>
        </div>

        <div class="col-tech">
          {{ job.assignedTechnicianName || '‚Äî' }}
        </div>

        <div class="col-amount">
          {{ formatCurrency(job.actualAmount || job.quotedAmount) }}
        </div>

        <div class="col-actions">
          <button class="btn btn-details"
                  [id]="i === 0 ? 'create-invoice-btn' : null"
                  [disabled]="tourService.isTourRunning() && tourService.getCurrentStep() === 1"
                  (click)="viewJob(job.id)">View Details</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Legend -->
  <div class="legend">
    <span>Legend:</span>
    <span class="status-quote">üü° Quote</span>
    <span class="status-progress">üîµ In Progress</span>
    <span class="status-complete">üü¢ Complete</span>
  </div>
</div>